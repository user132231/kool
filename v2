#!/bin/bash

# Failinimed
input_file="names_with_ages.txt"
output_file="result.txt"

# Kontrollime, kas sisendfail eksisteerib
if [ ! -f "$input_file" ]; then
  echo "Sisendfaili '$input_file' ei leitud. Kontrollige failinime ja asukohta."
  exit 1
fi

# Loome tulemuste faili päise
echo "Name;Year;Age" > "$output_file"

# Loeme sisendfaili rida-realt
current_year=$(date +"%Y")
while IFS=";" read -r name age; do
  if [ "$name" != "Name" ]; then # Jätame päise vahele
    year=$((current_year - age)) # Arvutame sünniaasta
    echo "$name;$year;$age" >> "$output_file"
  fi
done < "$input_file"

# Sorteerime faili vanuse järgi ja kirjutame tagasi tulemuste faili
sort -t ";" -k3n "$output_file" > temp_file && mv temp_file "$output_file"

# Teavitus
echo "Tulemused salvestatud faili '$output_file'."

