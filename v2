#!/bin/bash

# Failide nimed
input_file="names_with_ages.txt"
output_file="result.txt"

# Praegune aasta
current_year=$(date +%Y)

# Tulemused faili kirjutamine koos päisega
echo "Name;Year;Age" > "$output_file"

# Lugemine sisendfailist
while IFS=";" read -r full_name age; do
    # Kontrollime, et rida ei oleks tühi ega ebatäpne
    if [[ -n "$full_name" && -n "$age" ]]; then
        # Arvutame sünniaasta
        birth_year=$((current_year - age))

        # Kirjutame tulemuse väljundfaili
        echo "$full_name;$birth_year;$age" >> "$output_file"
    fi
done < "$input_file"

# Sorteerime tulemused vanuse järgi (kasvavalt) ja kirjutame need tagasi faili
sort -t";" -k3,3n "$output_file" -o "$output_file"
